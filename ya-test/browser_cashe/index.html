<!DOCTYPE html>
<!-- Copyright 2020 Yandex LLC. All rights reserved. -->
<html>

<head>
    <meta name="apple-itunes-app">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum=1.0,user-scalable=no">
    <style type="text/css">
    body {
        font-family: Arial, Helvetica, sans-serif;
        font-size: small;
    }
    </style>

    <script>
    window.addEventListener('storage', function(e) {
        document.querySelector('.my-key').textContent = e.key;
    </script>

</head>

<body>
    <div>
        <label for="textContent">Text: </label>
        <input class="text" id="textContent" value="newText">
    </div>
    <p id = "p">old</p>
    <button onclick = "foo(document.getElementById('textContent').value)", id="button"> Нажми!</button> 
</body>
    <script>

        function foo(text) {
            let a = document.getElementById('p');
            a.innerHTML = text;
            t()
         }

         function t() {

            var text = document.getElementById('p')

            function populateStorage() {
              localStorage.setItem('text', document.getElementById('text').textContent);
                setText();
             }

        function setText() {
          var currentText = localStorage.getItem('text');
          document.getElementById('textContent').value = currentText;
          document.getElementById('p').innerHTML = currentText;
     }

     text.onchange = populateStorage;
}
    </script>
</html>